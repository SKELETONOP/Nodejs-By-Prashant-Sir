<header class="relative z-50">
  <nav class="bg-white/10 backdrop-blur-xl border-b border-white/20 text-white px-4 py-4 shadow-2xl relative">
    <!-- Gradient overlay for extra depth -->
    <div class="absolute inset-0 bg-gradient-to-r from-purple-500/10 via-pink-500/5 to-blue-500/10 rounded-lg"></div>
    
    <div class="flex justify-between items-center relative z-10">
      <!-- Logo with gradient -->
      <div class="text-2xl sm:text-3xl font-bold">
        <a href="/" class="bg-gradient-to-r from-orange-400 to-pink-400 bg-clip-text text-transparent hover:from-orange-300 hover:to-pink-300 transition-all duration-300 transform hover:scale-105">
          Nesto 
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden text-sm md:text-sm lg:text-base md:flex space-x-2 lg:space-x-3 items-center">
        <% if (isLoggedIn) { %>
          <% if (user && user.userType === 'guest') { %>
        <a
          href="/"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'home' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          🏠 Home
        </a>
        
        
        <a
          href="/store/bookings"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'bookings' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          📅 Bookings
        </a>
        <a
          href="/store/favourites"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'favourites' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          ❤️ Favourites
        </a>
          <% } else if (user && user.userType === 'host') { %>
        <a
          href="/host/add-home"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'add-home' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          ➕ Add Home
        </a>
        <a
          href="/host/host-home-list"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'host-homes' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          🏡 Host Homes
        </a>
        <% } %>
        <% } %>
        
        <% if (!isLoggedIn) { %>
        <a
          href="/login"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'login' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg shadow-orange-500/25' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %> focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          🔑 Login
        </a>
        <a
          href="/signup"
          class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white shadow-lg shadow-orange-500/25 focus:outline-none focus:ring-2 focus:ring-orange-400/50"
        >
          ✨ Sign Up
        </a>
        <% } else { %>
        <form action="/logout" method="POST" class="inline-block">
          <button
            type="submit"
            class="px-4 lg:px-6 py-2 lg:py-3 rounded-xl shadow-sm transition-all duration-300 ease-in-out transform hover:scale-105 bg-red-500/20 text-white/90 border border-red-400/30 hover:bg-red-500/30 hover:border-red-400/50 hover:text-red-300 focus:outline-none focus:ring-2 focus:ring-red-400/50"
          >
            🚪 Logout
          </button>
        </form>
        <% } %>
      </div>

      <!-- Mobile menu button with glassmorphism -->
      <button
        id="menu-toggle"
        class="md:hidden text-white focus:outline-none text-2xl p-2 rounded-xl bg-white/10 border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:scale-110 focus:ring-2 focus:ring-orange-400/50"
      >
        <span id="menu-icon">☰</span>
      </button>
    </div>

    <!-- Mobile Navigation with smooth animation -->
    <div id="menu" class="mt-4 space-y-3 flex-col md:hidden hidden opacity-0 transform -translate-y-4 transition-all duration-300 ease-out">
      <% if (isLoggedIn) { %>
      <% if (user && user.userType === 'guest') { %>
      <a
        href="/"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'home' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        🏠 Home
      </a>
      
      <a
        href="/store/bookings"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'bookings' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        📅 Bookings
      </a>
      <a
        href="/store/favourites"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'favourites' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        ❤️ My Favourites
      </a>
      <% } else if (user && user.userType === 'host') { %>
      <a
        href="/host/host-home-list"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'host-homes' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        🏡 Host Homes
      </a>
      <a
        href="/host/add-home"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'add-home' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        ➕ Add Home
      </a>
      <% } %> 
      <% } %>
      
      <% if (!isLoggedIn) { %>
      <a
        href="/login"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 <%= activeTab === 'login' ? 'bg-gradient-to-r from-orange-400 to-pink-400 text-white shadow-lg' : 'bg-white/10 text-white/90 border border-white/20 hover:bg-white/20 hover:border-orange-400/50 hover:text-orange-300' %>"
      >
        🔑 Login
      </a>
      <a
        href="/signup"
        class="block px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white shadow-lg shadow-orange-500/25"
      >
        ✨ Sign Up
      </a>
      <% } else { %>
      <form action="/logout" method="POST">
        <button
          type="submit"
          class="block text-left w-full px-4 py-3 rounded-xl transition-all duration-300 ease-in-out transform hover:scale-105 bg-red-500/20 text-white/90 border border-red-400/30 hover:bg-red-500/30 hover:border-red-400/50 hover:text-red-300"
        >
          🚪 Logout
        </button>
      </form>
      <% } %>
    </div>
  </nav>
</header>

<script>
  const toggleBtn = document.getElementById("menu-toggle");
  const menu = document.getElementById("menu");
  const menuIcon = document.getElementById("menu-icon");

  toggleBtn.addEventListener("click", () => {
    const isHidden = menu.classList.contains("hidden");
    
    if (isHidden) {
      // Show menu
      menu.classList.remove("hidden");
      setTimeout(() => {
        menu.classList.remove("opacity-0", "-translate-y-4");
        menu.classList.add("opacity-100", "translate-y-0");
      }, 10);
      menuIcon.textContent = "✕";
      toggleBtn.classList.add("rotate-180");
    } else {
      // Hide menu
      menu.classList.remove("opacity-100", "translate-y-0");
      menu.classList.add("opacity-0", "-translate-y-4");
      setTimeout(() => {
        menu.classList.add("hidden");
      }, 300);
      menuIcon.textContent = "☰";
      toggleBtn.classList.remove("rotate-180");
    }
  });

  // Add stagger animation to menu items
  const menuItems = menu.querySelectorAll('a, button');
  menuItems.forEach((item, index) => {
    item.style.transitionDelay = `${index * 50}ms`;
  });

  // Add smooth scroll behavior
  document.documentElement.style.scrollBehavior = 'smooth';
</script>

<style>
  /* Custom animations */
  .rotate-180 {
    transform: rotate(180deg);
    transition: transform 0.3s ease;
  }
  
  /* Ensure backdrop blur works */
  .backdrop-blur-xl {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }
  
  /* Enhanced hover effects */
  nav a:hover, nav button:hover {
    box-shadow: 0 8px 32px rgba(251, 146, 60, 0.2);
  }
  
  /* Mobile menu animation improvements */
  #menu {
    transform-origin: top;
  }
  
  /* Logo hover effect */
  nav a[href="/store/index"]:hover {
    text-shadow: 0 0 20px rgba(251, 146, 60, 0.5);
  }
</style>